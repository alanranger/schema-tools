!function(){function e(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]&&"object"==typeof n[o]?e(t[o],n[o]):t[o]=n[o]);return t}function t(e,t){return e=e.replace(/{{(\w+)}}/g,function(e,n){return t&&t.hasOwnProperty(n)?t[n]:"empty value"}),e}function n(e){for(var t in e){if(t.startsWith("__reactEventHandlers$")||t.startsWith("__reactProps$"))return res=e[t],res;if(t.startsWith("__reactFiber$"))return res=e[t].pendingProps,res}return null}function o(e,t,n,o){e.setStyle("display","block");var r=Y.one("body"),i=new Y.Squarespace.Widgets.ModalLightbox({content:t.cloneNode(!0),render:r});i.once("render",function(e){var t=e.target.get("boundingBox"),n=e.target.get("content");t.addClass("RegisterInterestModal"),a(n._node),window.Squarespace&&window.Squarespace.initializeLayoutBlocks&&window.Squarespace.initializeLayoutBlocks(Y,n),setTimeout(function(){a(n._node)},300)}),i.after("open",function(e){var t=e.target.get("content");setTimeout(function(){a(t._node),n&&n(t,o)},200)}),e.on("click",function(e){i.open()}),window.__RYI_Modals.push(i)}function r(e){return fetch(e+"?format=main-content",{method:"GET"}).then(function(e){return e.ok?e.text():(console.warn("error : "+e.status),!1)}).catch(function(e){console.log(e)})}function i(e,n,i){if(e)if(n.render)if(n.source){var a=n.render.split("|"),s=a[0],c=(a[1]+"").trim()||"append",d=e.one(s);if(d){var u=Y.Node.create(t(l,n));"append"==c?d.append(u):"prepend"==c?d.prepend(u):d.insert(u,c),-1==n.source.indexOf("/")&&Y.one(n.source)?o(u,Y.one(n.source),n.afterRenderFunction,n.customAfterRenderFunction):n.source.indexOf("/")>-1?r(n.source).then(function(e){e?o(u,Y.Node.create(e),n.afterRenderFunction,n.customAfterRenderFunction):console.log("Hmm.. we can't find the content there: "+n.source)}):console.log("We can not find "+n.source+" so check this option")}else console.log("We can't find the specified "+s+" on this page")}else console.log('Option "source" is required.');else console.log('Option "render" is required.')}function a(e){e=e&&e.target||e||document;var t=e.querySelectorAll&&e.querySelectorAll(".form-item");if(t)for(var n=t.length-1;n>=0;n--){var o=t[n],r=o.querySelector("input");r&&(r.placeholder&&"RYI"==r.placeholder||r.value&&"RYI"==r.value)&&(o.style.display="none")}}var l='<div style="display:none" class="sqs-block-button sqs-block register-interest-button"><div class="sqs-block-button-container--{{alignment}}" data-alignment="{{alignment}}"><button class="sqs-block-button-element--{{size}} sqs-block-button-element" data-theme="{{lightboxTheme}}" data-source="{{source}}">{{text}}</button></div></div>';window.__RYI_Modals=[],window.__RYI_Modals=[];var s={render:!1,source:!1,text:"Register interest",alignment:"center",size:"small",afterRenderFunction:function(e,t){var o=e.one(".form-wrapper form"),r=!!e.one(".sqs-form-block-context")&&JSON.parse(e.one(".sqs-form-block-context")._node.innerText),i=document.body.className||document.querySelector("body"),a=i.indexOf("collection-type-")>-1&&i.substr(i.indexOf("collection-type-")+16).split(" ")[0],l={url:window.location.href,title:document.title,collectionType:a};if("events"==a&&i.indexOf("view-item")>-1){Y.one(".eventitem-meta-date").get("innerText");var s="",c=!1;Y.all(".event-date, .eventitem-meta-time").each(function(e){e.hasClass("event-date")&&(c&&(s+=" - "),c=!0),e.hasClass("eventitem-meta-time")&&(s+=" "),s+=e.get("innerText")}),Y.one(".eventitem--multiday")||Y.one(".event-time-12hr-start").get("innerText")+" - "+Y.one(".event-time-12hr-end").get("innerText");var d=Y.one(".eventitem-meta-address a");d&&(d=d.get("href").split("?q=")[1],l.eventLocation=d&&decodeURIComponent(d),l.eventDate=s)}if(l.title&&!e.one("h1.RYI-title")&&e.prepend('<h1 class="RYI-title">'+l.title+"</h1>"),o){if(r&&r.formFields){var u={};if(r.formFields.forEach(function(e){var t=e.title;if(e&&e.placeholder&&"RYI"==e.placeholder)switch(t){case"Page Title":l.title&&(u.exist=!0,u[e.id]=l.title);break;case"Page Url":l.url&&(u.exist=!0,u[e.id]=l.url);break;case"Event Date":l.eventDate&&(u.exist=!0,u[e.id]=l.eventDate);break;case"Event Location":l.eventLocation&&(u.exist=!0,u[e.id]=l.eventLocation)}}),u.exist){var f=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(e){var t;if(e&&0==(e+"").indexOf("{")){try{t=JSON.parse(e)}catch(e){console.log(e)}if(t&&t.formId){var n=JSON.parse(t.form);for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&u[e]&&(n[e]=u[e]);t.form=JSON.stringify(n),e=JSON.stringify(t)}}f.apply(this,arguments)}}}else{var v=o._node.querySelectorAll('.field, input[type="hidden"]');let e=function(e,t,n,o){o=100*o+100,t._valueTrackers?(console.log("Input tracker"),t._valueTracker.setValue(n)):(t.value=n,t.setAttribute("value",n),e.value=n),e&&e.onChange&&(e.value=n,setTimeout(function(){},o))};if(v.length)for(let t=0;t<v.length;t++){const o=v[t],r=o.querySelector("input");let i=!!o.querySelector(".title")&&o.querySelector(".title").innerText.trim(),a=!(!o.classList.contains("hidden")&&"hidden"!=o.getAttribute("type")||"RYI"!=o.value)&&o.getAttribute("name").replace(/SQF/g,"").replace(/_/g," ").trim(),s=r&&n(r);if(r&&("RYI"==r.getAttribute("placeholder")||"RYI"==r.getAttribute("value"))&&i)switch(i){case"Page Title":l.title&&e(s,r,l.title,t);break;case"Page Url":l.url&&e(s,r,l.url,t);break;case"Event Date":l.eventDate&&e(s,r,l.eventDate,t);break;case"Event Location":l.eventLocation&&e(s,r,l.eventLocation,t)}else r&&!r.__changeEvnt&&r.addEventListener&&(r.__changeEvnt=r.addEventListener("change",function(t){console.log("Event:",t);for(let t=0;t<v.length;t++){const o=v[t],r=o.querySelector("input");let i=!!o.querySelector(".title")&&o.querySelector(".title").innerText.trim(),a=(!(!o.classList.contains("hidden")&&"hidden"!=o.getAttribute("type")||"RYI"!=o.value)&&o.getAttribute("name").replace(/SQF/g,"").replace(/_/g," ").trim(),r&&n(r));if(r&&("RYI"==r.getAttribute("placeholder")||"RYI"==r.getAttribute("value"))&&i)switch(i){case"Page Title":l.title&&e(a,r,l.title,t);break;case"Page Url":l.url&&e(a,r,l.url,t);break;case"Event Date":l.eventDate&&e(a,r,l.eventDate,t);break;case"Event Location":l.eventLocation&&e(a,r,l.eventLocation,t)}}}));if(!r&&a){switch(a){case"PAGE TITLE":l.title&&(o.value=l.title),s&&(s.value=l.title);break;case"PAGE URL":l.url&&(o.value=l.url),s&&(s.value=l.url);break;case"EVENT DATE":l.eventDate&&(o.value=l.eventDate),s&&(s.value=l.eventDate);break;case"EVENT LOCATION":l.eventLocation&&(o.value=l.eventLocation),s&&(s.value=l.eventLocation)}s&&s.onChange&&s.onChange({target:o})}}try{var p=n(o.one(".field-list")._node);p&&p.children&&p.children.length&&p.children.forEach(function(e){e.props&&e.props.onChange&&e.key&&e.props.settings&&e.props.settings.placeholder&&"RYI"==e.props.settings.placeholder&&(console.log("here",e.key,document.getElementById(e.key+"-field"),document.getElementById(e.key+"-field").value),e.props.onChange(document.getElementById(e.key+"-field").value))})}catch(e){}}t&&t(o,v,l)}else console.log("Can't find form")}};window.Squarespace.onInitialize(Y,function(){if(console.log("Register Interest Started!"),window.customRegisterInterestSettings)for(var t in window.customRegisterInterestSettings)if(window.customRegisterInterestSettings.hasOwnProperty(t)){var n=t,o=e(s,window.customRegisterInterestSettings[t]);i(Y.one(n),o)}a()}),window.Squarespace.onDestroy(Y,function(){if(window.__RYI_Modals&&window.__RYI_Modals.length)for(var e=window.__RYI_Modals.length-1;e>=0;e--)window.__RYI_Modals[e].destroy&&window.__RYI_Modals[e].destroy()}),window.addEventListener("DOMContentLoaded",a,!1),a()}();