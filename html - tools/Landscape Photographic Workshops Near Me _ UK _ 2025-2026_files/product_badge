const sproutBaseURL="https://sprout-api.thegoodapi.com";function displaySproutModal(){var modal_a=document.getElementById("SproutModalMain");var modal=document.getElementById("SproutModalMain_user");if(!modal){modal=modal_a.cloneNode(true);modal.id="SproutModalMain_user";document.body.appendChild(modal)}modal.style.display="block";var span=modal.getElementsByClassName("SproutModalClose")[0];span.onclick=function(){modal.style.display="none";modal.remove()};window.onclick=function(event){if(event.target==modal){modal.style.display="none";modal.remove()}};var treeTabs=document.getElementsByClassName("TreeTab");if(treeTabs.length>0){openTab(modal,"TreesContent")}else{openTab(modal,"PlasticsContent")}}function openTab(root,tabName){if(root==null){root=document}console.log("opening tab....",tabName);if(tabName==="PlasticsContent"){sp_displayNoneBasedOnClass(root,"TreesContent");sp_displayBlockBasedOnClass(root,"PlasticsContent");sp_displayNoneBasedOnClass(root,"SproutModalImg");sp_displayBlockBasedOnClass(root,"SproutModalImgPlastics");sp_addClassBasedOnClass(root,"PlasticsTab","active");sp_removeClassBasedOnClass(root,"TreeTab","active")}else if(tabName==="TreesContent"){sp_displayNoneBasedOnClass(root,"PlasticsContent");sp_displayNoneBasedOnClass(root,"SproutModalImgPlastics");sp_displayBlockBasedOnClass(root,"TreesContent");sp_displayBlockBasedOnClass(root,"SproutModalImg");sp_addClassBasedOnClass(root,"TreeTab","active");sp_removeClassBasedOnClass(root,"PlasticsTab","active")}}function sp_addClassBasedOnClass(root,targetClassName,classToAdd){var elements=root.querySelectorAll("."+targetClassName.split(" ").join("."));for(var i=0;i<elements.length;i++){elements[i].classList.add(classToAdd)}}function sp_removeClassBasedOnClass(root,targetClassName,classToRemove){var elements=root.querySelectorAll("."+targetClassName.split(" ").join("."));for(var i=0;i<elements.length;i++){elements[i].classList.remove(classToRemove)}}function sp_displayNoneBasedOnClass(root,className){var elements=root.getElementsByClassName(className);for(var i=0;i<elements.length;i++){elements[i].style.display="none"}}function sp_displayBlockBasedOnClass(root,className){var elements=root.getElementsByClassName(className);for(var i=0;i<elements.length;i++){elements[i].style.display="block"}}async function loadSproutStylesheetOnce(src){const baseID="SproutBaseStylesheet";const t=await fetch(src).then(r=>r.text());var isLoaded=false;var links=document.getElementsByTagName("link");for(var i=0;i<links.length;i++){if(links[i].id===baseID){isLoaded=true;break}}if(!isLoaded){var link=document.createElement("style");link.innerHTML=t;link.id=baseID;document.head.appendChild(link)}}async function loadSproutProductBadge(){const sdk=window.ExtensionScriptsSDK["1.0"];const pd=await sdk.page.getDetails();const siteID=pd.website.id;const stylesheetUri=`${sproutBaseURL}/ss/scripts/css/badge_base?websiteID=${siteID}`;await loadSproutStylesheetOnce(stylesheetUri);const ProductPageBadge=sdk.page.hookType.ProductPageBadge;var ele=document.createElement("div");var badge={};badge.hooks=[{element:ele,mobileElement:ele}];var output=await sdk.page.createHook(ProductPageBadge,badge);var badgeUrl=`${sproutBaseURL}/ss/api/badge/product?websiteID=${siteID}&productID=${pd.product.id}`;var badgeContent=await fetch(badgeUrl).then(r=>r.text());output.hooks[0].element.innerHTML=badgeContent;output.hooks[1].mobileElement.innerHTML=badgeContent}loadSproutProductBadge();
