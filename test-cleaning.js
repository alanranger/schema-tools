// Test script for cleanFullArticleBody function
// Using actual polluted articleBody from the output file

const pollutedArticleBody = `/Cart 0 [/cart]Sign In My Account/searchBack photography courses coventry [/photography-courses-coventry] Which Photography Courses Are Best For Me? [/photography-courses-coventry] Course Calendar [/course-finder-photography-classes-near-me] Beginners Photography Course [/beginners-photography-classes] Free Online Photography Course [/free-online-photography-course] Beginners Lightroom Course [/photo-editing-course-coventry] RPS Mentoring [/rps-courses-mentoring-distinctions] photography-lessons-online-1-2-1 [/photography-lessons-online-121] Private 1-2-1 Lessons [/private-photography-lessons] Monthly Mentoring Assignments [/photography-mentoring-online-assignments] Intentions Course [/intentions-course-six-month-photography-project]Back Workshops Calendar [/photography-workshops] 2.5hr - 4hr Workshops [/landscape-photography-workshops] One-day Workshops [/one-day-landscape-photography-workshops] Residential Workshops [/photography-workshops-near-me]Back Services Summary [/photography-tuition-services] Gift Vouchers [/photography-gift-vouchers] 1-2-1 Zoom Support [/photography-lessons-online-121] Private 1-2-1 Lessons [/private-photography-lessons] Gear Checks & Services [/photography-services-near-me/camera-sensor-clean/] Fine Art Prints [/fine-art-prints] Pick N Mix - Payment Plans [/photography-payment-plan]Back Hire A Professional Photographer [/hire-a-professional-photographer-in-coventry] Products, Services & Property Photography [/professional-commercial-photographer-coventry] Portrait Photography [/professional-photographer-near-me] Staff Training on Photography [/corporate-photography-training]Back Gallery [/gallery-image-portfolios]Back Book A Free Consultation [/contact-us-alan-ranger-photography] Blog [/photography-news-blog/] Academy [/free-online-photography-course] Recommended Products [/photography-equipment-recommendations]Back About Me [/about-alan-ranger] My Ethics [/my-ethical-policy] My Testimonials [/testimonials-customer-reviews]WILDLIFE PHOTOGRAPHY PRACTICE ASSIGNMENT - FREE LESSONhttps://www.alanranger.com/free-online-photography-courseWILDLIFE PHOTOGRAPHYThis assignment focuses on essential techniques and considerations for capturing compelling wildlife photographs. Students will learn how to effectively use camera settings to enhance their wildlife photography skills and create stunning images in natural environments.LEARNING OBJECTIVES * Understand the importance of patience and observation in wildlife photography. * Learn to use aperture priority or shutter priority modes effectively. * Develop skills in composing wildlife images to convey the subject's behavior and habitat.WANT FEEDBACK ON YOUR ASSIGNMENT?Join Foundation Plus and get personalised monthly critique plus full access to all assignments.Learn More & Join [https://www.alanranger.com/foundation-members-plus-home]Download Assignment PDF [https://raw.githubusercontent.com/alanranger/alanranger-schema/main/Assignments/30-wildlife-photography/Wildlife-Photography-Assignment.pdf]BEFORE YOU SHOOT * Research the local wildlife species you intend to photograph and their behaviors. * Scout the location in advance to identify potential shooting spots and times. * Pack necessary gear, ensuring you have a telephoto lens suitable for wildlife. * Check the weather forecast to plan for optimal shooting conditions. * Prepare to spend extended periods in the field to increase chances of capturing desired moments. identify potential shooting spots and times. * Pack necessary gear, ensuring you have a telephoto lens suitable for wildlife. * Check the weather forecast to plan for optimal shooting conditions. * Prepare to spend extended periods in the field to increase chances of capturing desired moments.THE ASSIGNMENTTECHNICAL FOCUS * Use aperture priority mode to control depth of field when photographing animals in their habitats. * Utilize shutter priority mode to freeze motion during dynamic wildlife behavior. * Set ISO to a fixed value (ISO 200) to maintain consistent exposure settings. * Focus on the animal's eyes to enhance engagement in the photograph. * Utilize continuous shooting mode to capture multiple frames of fast-moving wildlife.CREATIVE FOCUS * Experiment with different angles and perspectives to add interest to your wildlife shots. * Incorporate the environment into your compositions to tell a story about the animal's habitat. * Use leading lines to draw the viewer's eye towards the wildlife subject. * Capture candid moments that reveal the behavior and interactions of wildlife. * Consider the use of negative space to emphasize the subject in your images.ASSIGNMENT TASKS 1. Use aperture priority mode at f/5.6 with ISO 200 fixed, letting the camera set shutter speed to capture a bird in flight. 2. Set your camera to shutter priority mode at 1/1000s with ISO 200 fixed, allowing the camera to set aperture to photograph a running deer. 3. Capture a close-up shot of a resting animal using aperture priority mode at f/4 with ISO 200 fixed to create a blurred background. 4. Photograph a group of animals interacting using shutter priority mode at 1/250s with ISO 200 fixed to freeze the action. 5. Use aperture priority mode at f/8 with ISO 200 fixed to photograph a landscape with wildlife, ensuring both the subject and background are in focus. 6. Set shutter priority mode at 1/500s with ISO 200 fixed to capture a bird landing on a branch, letting the camera adjust the aperture.üí° Stretch Tasks * Experiment with long exposure techniques using a tripod to capture wildlife moving through a scene at dusk, while maintaining ISO 200. * Create a series of images that document the behavior of a specific animal over a period, focusing on different times of day and settings.DO / DON'TDO * ‚úì Do be patient and wait for the right moment to capture wildlife. * ‚úì Do use a tripod to stabilize your shots, especially in low-light conditions. * ‚úì Do respect wildlife and maintain a safe distance to avoid disturbing them. * ‚úì Do familiarize yourself with local wildlife laws and regulations regarding photography. * ‚úì Do keep your gear ready and accessible for spontaneous opportunities.DON'T * ‚úó Don't approach wildlife too closely, as it may stress or scare them away. * ‚úó Don't use flash photography, as it can startle animals and disrupt their natural behavior. * ‚úó Don't forget to check your camera settings before shooting. * ‚úó Don't ignore the background in your compositions; it can make or break your shot. * ‚úó Don't rush your shots; take your time to observe and compose.REFLECTION QUESTIONS * What challenges did you face while trying to photograph wildlife, and how did you overcome them? * How did using priority modes change the way you approached shooting wildlife? * What did you learn about animal behavior that helped you capture better images? * How can you improve your patience and observa lenges did you face while trying to photograph wildlife, and how did you overcome them? * How did using priority modes change the way you approached shooting wildlife? * What did you learn about animal behavior that helped you capture better images? * How can you improve your patience and observational skills for future wildlife photography sessions?For Foundation Plus [https://www.alanranger.com/foundation-members-plus-home] members: Submit 3 images from this assignment for personalised feedback in your next Zoom session. You should upload to the shared Dropbox folder - link provided by Alan when you joined Foundation Plus.Alan Ranger [/blog-on-photography?author=5013f4b2c4aaa4752ac69b19]23 November 2025Genre-Specific [/blog-on-photography/tag/Genre-Specific]Facebook0 [https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.alanranger.com%2Fblog-on-photography%2Fwildlife-photography-practice-assignment-free-lesson] LinkedIn0 [https://www.linkedin.com/shareArticle?mini=true&source=Alan+Ranger+Photography&summary=This+assignment+focuses+on+essential+...&url=https%3A%2F%2Fwww.alanranger.com%2Fblog-on-photography%2Fwildlife-photography-practice-assignment-free-lesson] Tumblr [https://www.tumblr.com/share/link?url=https%3A%2F%2Fwww.alanranger.com%2Fblog-on-photography%2Fwildlife-photography-practice-assignment-free-lesson] Pinterest0 [https://www.pinterest.com/pin/create/link/?description=This+assignment+focuses+on+essential+...&media=https://images.squarespace-cdn.com/content/v1/5013f4b2c4aaa4752ac69b17/1763932543229-PXS6HRXQD7EH4QMVNRDQ/wildlife-photography-thumbnail.png&url=https%3A%2F%2Fwww.alanranger.com%2Fblog-on-photography%2Fwildlife-photography-practice-assignment-free-lesson] 0 Likes`;

const title = "Wildlife Photography Practice Assignment - Free Lesson";

// Replicate the cleanFullArticleBody function
function cleanFullArticleBody(articleBody, title) {
  if (!articleBody) return '';
  let text = articleBody;
  
  // Remove all bracket patterns (these are definitely navigation)
  text = text.replace(/\[\/[^\]]+\]/g, '');
  text = text.replace(/\[.*?\]/g, '');
  
  // Find where actual content starts by looking for title (case-insensitive, anywhere in first 2000 chars)
  let contentStart = 0;
  if (title) {
    // Try exact title match (uppercase version often appears)
    const titleUpper = title.toUpperCase();
    const titleIndex = text.indexOf(titleUpper);
    if (titleIndex > 0 && titleIndex < 2000) {
      contentStart = titleIndex;
    } else {
      // Try case-insensitive match
      const titlePattern = new RegExp(title.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'i');
      const match = text.match(titlePattern);
      if (match && match.index !== undefined && match.index < 2000) {
        contentStart = match.index;
      } else {
        // Try key words from title
        const titleWords = title.split(/\s+/).filter(w => w.length > 4).slice(0, 2);
        if (titleWords.length >= 2) {
          const wordsPattern = new RegExp(titleWords.map(w => w.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')).join('[^a-z]*'), 'i');
          const wordsMatch = text.match(wordsPattern);
          if (wordsMatch && wordsMatch.index !== undefined && wordsMatch.index < 2000) {
            contentStart = wordsMatch.index;
          }
        }
      }
    }
  }
  
  // If we found content start, use it
  if (contentStart > 0) {
    text = text.substring(contentStart);
  } else {
    // Look for content markers (LEARNING OBJECTIVES, THE ASSIGNMENT, etc.)
    const contentMarkers = [
      /(LEARNING OBJECTIVES|THE ASSIGNMENT|BEFORE YOU|TECHNICAL FOCUS|CREATIVE FOCUS|ASSIGNMENT TASKS|DO\s*\/\s*DON'T|REFLECTION QUESTIONS)/i,
      /This (assignment|article|post|guide|tutorial)/i,
    ];
    
    for (const marker of contentMarkers) {
      const match = text.match(marker);
      if (match && match.index !== undefined && match.index < 2000) {
        text = text.substring(match.index);
        break;
      }
    }
  }
  
  // Remove navigation patterns (aggressive - anywhere in text, not just start)
  const navPatterns = [
    /\/Cart\s+\d+/gi,
    /Cart\s+\d+/gi,
    /Sign In My Account/gi,
    /My Account/gi,
    /\/search/gi,
    /Back\s+photography\s+courses\s+coventry/gi,
    /Back\s+Workshops\s+Calendar/gi,
    /Back\s+Services\s+Summary/gi,
    /Back\s+Hire\s+A\s+Professional\s+Photographer/gi,
    /Back\s+Gallery/gi,
    /Back\s+Book\s+A\s+Free\s+Consultation/gi,
    /Back\s+[A-Z][a-z]+(?:\s+[A-Z][a-z]+)*/g, // "Back Something"
    /Genre-Specific/gi,
  ];
  
  for (const pattern of navPatterns) {
    text = text.replace(pattern, '');
  }
  
  // Remove social sharing URLs (anywhere)
  text = text.replace(/https:\/\/www\.(facebook|linkedin|tumblr|pinterest)\.com[^\s]*/gi, '');
  
  // Remove social sharing text patterns (Facebook0, LinkedIn0, etc.) - anywhere
  text = text.replace(/\s+(Facebook0|LinkedIn0|Tumblr|Pinterest0|0\s+Likes)\s*/gi, ' ');
  
  // Remove author/date footer patterns
  text = text.replace(/Alan Ranger\s*\/blog-on-photography[^\n]*/gi, '');
  text = text.replace(/\d+\s+(January|February|March|April|May|June|July|August|September|October|November|December)\s+\d{4}\s*(Facebook|LinkedIn|Tumblr|Pinterest|Likes|Genre)/gi, '');
  
  // Clean up excessive whitespace but preserve paragraph structure
  text = text.replace(/\n{3,}/g, '\n\n');
  text = text.replace(/[ \t]+/g, ' ');
  text = text.trim();
  
  return text;
}

// Test the function
console.log('=== TESTING cleanFullArticleBody ===\n');
console.log('Original length:', pollutedArticleBody.length);
console.log('Original starts with:', pollutedArticleBody.substring(0, 100));

const cleaned = cleanFullArticleBody(pollutedArticleBody, title);

console.log('\nCleaned length:', cleaned.length);
console.log('Cleaned starts with:', cleaned.substring(0, 200));
console.log('\n=== CHECKING FOR POLLUTION ===');
const pollutionMarkers = ['/Cart', 'Sign In My Account', '[/cart]', 'Back photography', 'Facebook0', 'LinkedIn0', 'Alan Ranger [/blog-on-photography'];
const foundPollution = pollutionMarkers.filter(marker => cleaned.includes(marker));
if (foundPollution.length > 0) {
  console.log('‚ùå STILL CONTAINS POLLUTION:', foundPollution);
} else {
  console.log('‚úÖ NO POLLUTION DETECTED');
}

console.log('\n=== FIRST 500 CHARS OF CLEANED ===');
console.log(cleaned.substring(0, 500));

